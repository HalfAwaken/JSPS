<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>内部销售增加</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" href="css/font.css" />
    <link rel="stylesheet" href="css/xadmin.css" />
    <link
      rel="stylesheet"
      href="https://cdn.bootcss.com/Swiper/3.4.2/css/swiper.min.css"
    />
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script
      type="text/javascript"
      src="https://cdn.bootcss.com/Swiper/3.4.2/js/swiper.jquery.min.js"
    ></script>
    <script src="lib/layui/layui.js" charset="utf-8"></script>
    <script type="text/javascript" src="js/xadmin.js"></script>
  </head>
  <style type="text/css">
    .wrapper .page-content {
      width: 100%;
    }
  </style>

  <body>
    <!-- 中部开始 -->
    <div class="wrapper">
      <!-- 右侧主体开始 -->
      <div class="page-content">
        <div class="content" style="min-height: 0">
          <!-- 右侧内容框架，更改从这里开始 -->
          <form class="layui-form">
            <div class="layui-form-item">
              <label class="layui-form-label">
                <span class="x-red">*</span>商品分类
              </label>
              <div class="layui-input-inline">
                <select
                  class="category"
                  name="category"
                  lay-filter="category"
                ></select>
              </div>
            </div>
            <div class="layui-form-item">
              <label class="layui-form-label">
                <span class="x-red">*</span>商品名字
              </label>
              <div class="layui-input-inline">
                <input type="text" class="layui-input proname" />
              </div>
            </div>
            <div class="layui-form-item">
              <label class="layui-form-label">
                <span class="x-red">*</span>商品图片
              </label>
              <div
                class="layui-input-inline"
                style="position: relative; height: 100px"
              >
                <input
                  id="loadImg"
                  name="imgFile"
                  type="file"
                  class="layui-input proimg layui-upload-file"
                  style="width: 100px; height: 100px; opacity: 0"
                  accept="image/*"
                />
                <img
                  class="choiceImg"
                  src="images/chooseImage.png"
                  style="
                    width: 100px;
                    height: 100px;
                    position: absolute;
                    top: 0;
                    left: 0;
                  "
                />
              </div>
            </div>
            <div class="layui-form-item">
              <label class="layui-form-label">
                <span class="x-red">*</span>排序号
              </label>

              <div class="layui-input-inline">
                <input type="number" class="layui-input proNum" />
              </div>
            </div>
            <div class="layui-form-item">
              <label class="layui-form-label">
                <span class="x-red">*</span>是否上架
              </label>
              <div class="layui-input-inline">
                <select class="online" name="online" lay-filter="online">
                  <option value="1">上架</option>
                  <option value="2">下架</option>
                </select>
              </div>
            </div>
            <!--····························································-->
            <div class="spec_wrap">
              <div>
                <div
                  style="
                    display: flex;
                    align-items: center;
                    justify-content: space-between;
                  "
                >
                  <h1 style="color: red">规格1</h1>
                  <div
                    style="
                      width: 100px;
                      height: 40px;
                      background: #4390ee;
                      line-height: 40px;
                      text-align: center;
                      border-radius: 5px;
                      cursor: pointer;
                    "
                    class="addSpec"
                  >
                    添加规格
                  </div>
                </div>

                <div class="layui-form-item">
                  <label class="layui-form-label">
                    <span class="x-red">*</span>商品规格
                  </label>
                  <div class="layui-input-inline">
                    <select
                      class="proSpec0"
                      name="proSpec0"
                      lay-filter="proSpec0"
                    >
                      <option value="立方">立方</option>
                      <option value="袋">袋</option>
                      <option value="件">件</option>
                      <option value="张">张</option>
                      <option value="根">根</option>
                      <option value="桶">桶</option>
                      <option value="卷">卷</option>
                      <option value="盒">盒</option>
                      <option value="套">套</option>
                      <option value="把">把</option>
                    </select>
                  </div>
                </div>

                <div class="layui-form-item bag0" style="display: none">
                  <label class="layui-form-label">
                    <span class="x-red">*</span>详细规格
                  </label>
                  <div class="layui-input-inline">
                    <input type="number" class="layui-input promsgspec" />
                  </div>
                  <div class="layui-form-mid layui-word-aux">
                    <span class="x-red"></span>袋=1立方
                  </div>
                </div>

                <div class="layui-form-item piece0" style="display: none">
                  <label class="layui-form-label">
                    <span class="x-red">*</span>详细规格
                  </label>
                  <div class="layui-input-inline">
                    <input type="number" class="layui-input promsgspec" />
                  </div>
                  <div class="layui-form-mid layui-word-aux">
                    <span class="x-red"></span>件=1立方
                  </div>
                </div>

                <div class="layui-form-item zhang0" style="display: none">
                  <label class="layui-form-label">
                    <span class="x-red">*</span>详细规格
                  </label>
                  <div class="layui-input-inline">
                    <input type="number" class="layui-input promsgspec" />
                  </div>
                  <div class="layui-form-mid layui-word-aux">
                    <span class="x-red"></span>张=1立方
                  </div>
                </div>

                <div class="layui-form-item root0" style="display: none">
                  <label class="layui-form-label">
                    <span class="x-red">*</span>详细规格
                  </label>
                  <div class="layui-input-inline">
                    <input type="number" class="layui-input promsgspec" />
                  </div>
                  <div class="layui-form-mid layui-word-aux">
                    <span class="x-red"></span>根=1立方
                  </div>
                </div>

                <div class="layui-form-item bucket0" style="display: none">
                  <label class="layui-form-label">
                    <span class="x-red">*</span>详细规格
                  </label>
                  <div class="layui-input-inline">
                    <input type="number" class="layui-input promsgspec" />
                  </div>
                  <div class="layui-form-mid layui-word-aux">
                    <span class="x-red"></span>桶=1立方
                  </div>
                </div>

                <div class="layui-form-item volume0" style="display: none">
                  <label class="layui-form-label">
                    <span class="x-red">*</span>详细规格
                  </label>
                  <div class="layui-input-inline">
                    <input type="number" class="layui-input promsgspec" />
                  </div>
                  <div class="layui-form-mid layui-word-aux">
                    <span class="x-red"></span>卷=1立方
                  </div>
                </div>

                <div class="layui-form-item box0" style="display: none">
                  <label class="layui-form-label">
                    <span class="x-red">*</span>详细规格
                  </label>
                  <div class="layui-input-inline">
                    <input type="number" class="layui-input promsgspec" />
                  </div>
                  <div class="layui-form-mid layui-word-aux">
                    <span class="x-red"></span>盒=1立方
                  </div>
                </div>

                <div class="layui-form-item set0" style="display: none">
                  <label class="layui-form-label">
                    <span class="x-red">*</span>详细规格
                  </label>
                  <div class="layui-input-inline">
                    <input type="number" class="layui-input promsgspec" />
                  </div>
                  <div class="layui-form-mid layui-word-aux">
                    <span class="x-red"></span>套=1立方
                  </div>
                </div>

                <div class="layui-form-item hold0" style="display: none">
                  <label class="layui-form-label">
                    <span class="x-red">*</span>详细规格
                  </label>
                  <div class="layui-input-inline">
                    <input type="number" class="layui-input promsgspec" />
                  </div>
                  <div class="layui-form-mid layui-word-aux">
                    <span class="x-red"></span>把=1立方
                  </div>
                </div>

                <div class="layui-form-item">
                  <label class="layui-form-label">
                    <span class="x-red">*</span>商品价格
                  </label>

                  <div class="layui-input-inline">
                    <input type="number" class="layui-input proprice0" />
                  </div>
                  <div class="layui-form-mid layui-word-aux">
                    <span class="x-red"></span>元
                  </div>
                </div>

                <div class="layui-form-item">
                  <label class="layui-form-label">
                    <span class="x-red">*</span>规格描述
                  </label>

                  <div class="layui-input-inline">
                    <input type="text" class="layui-input describe0" />
                  </div>
                </div>

                <div class="layui-form-item">
                  <label class="layui-form-label">
                    <span class="x-red">*</span>商品库存
                  </label>

                  <div class="layui-input-inline">
                    <input type="number" class="layui-input prostock0" />
                  </div>
                </div>
                <div class="layui-form-item">
                  <label class="layui-form-label">
                    <span class="x-red">*</span>排序号
                  </label>

                  <div class="layui-input-inline">
                    <input type="number" class="layui-input proNum0" />
                  </div>
                </div>
                <div class="layui-form-item" style="font-size: 24px">
                  搬运设置
                </div>
                <div
                  class="layui-form-item"
                  style="display: flex; padding-left: 140px"
                >
                  <div style="width: 190px">楼梯</div>
                  <div style="width: 190px; margin-left: 20px">电梯</div>
                </div>
                <div class="layui-form-item">
                  <label class="layui-form-label">
                    <span class="x-red">*</span>搬运价格/层
                  </label>
                  <div
                    class="layui-input-inline"
                    style="display: flex; width: 400px"
                  >
                    <input
                      type="number"
                      placeholder="请输入楼梯搬运价格"
                      data-type="stairs"
                      name="layerlt"
                      class="layui-input surepassword layer0 layerone"
                    />
                    <input
                      type="number"
                      placeholder="请输入电梯搬运价格"
                      data-type="elevator"
                      name="layerdt"
                      style="margin-left: 20px"
                      class="layui-input surepassword layer0 layertwo"
                    />
                  </div>
                  <div
                    class="layui-form-mid layui-word-aux"
                    style="margin-left: 10px"
                  >
                    元
                  </div>
                </div>
                <div class="layui-form-item">
                  <label class="layui-form-label">
                    <span class="x-red">*</span>搬运起送价
                  </label>
                  <div
                    class="layui-input-inline"
                    style="width: 200px; display: flex"
                  >
                    <input
                      type="number"
                      placeholder="请输入搬运起送价"
                      data-type="stairs"
                      style="width: 190px"
                      name="secondlt"
                      class="layui-input surepassword startmoney0"
                    />
                    <!--<input type="number" disabled placeholder="请输入电梯转运价格" data-type="elevator" name="seconddt" class="layui-input surepassword seconds secondstwo" style="opacity: 0;margin-left: 20px;">-->
                  </div>
                  <div
                    class="layui-form-mid layui-word-aux"
                    style="margin-left: 10px"
                  >
                    元
                  </div>
                </div>
              </div>
            </div>

            <!--<div class="layui-form-item">
							<label class="layui-form-label">
                        <span class="x-red">*</span>卸货价格/米
                    </label>
							<div class="layui-input-inline" style="width: 400px;display: flex;">
								<input type="number" placeholder="请输入楼梯卸货价格" data-type="stairs" name="ricelt" class="layui-input surepassword rice riceone">
								<input type="number" placeholder="请输入电梯卸货价格" data-type="elevator" name="ricedt" class="layui-input surepassword rice ricetwo" style="margin-left: 20px;">
							</div>
							<div class="layui-form-mid layui-word-aux" style="margin-left: 10px;">
								元
							</div>
						</div>
						<div class="layui-form-item">
							<label class="layui-form-label">
                        <span class="x-red">*</span>转运价格/次
                    </label>
							<div class="layui-input-inline" style="width: 200px;display: flex;">
								<input type="number" placeholder="请输入转运价格" data-type="stairs" style="width: 190px;" name="secondlt" class="layui-input surepassword seconds secondsone">
							</div>
							<div class="layui-form-mid layui-word-aux" style="margin-left: 10px;">
								元
							</div>
						</div>-->
            <div class="layui-form-item">
              <label class="layui-form-label"> </label>
              <div class="layui-btn addPro">增加</div>
            </div>
          </form>
          <script
            src="js/tips.js"
            type="text/javascript"
            charset="utf-8"
          ></script>
          <!-- 右侧内容框架，更改从这里结束 -->
        </div>
      </div>
      <!-- 右侧主体结束 -->
    </div>
    <!-- 中部结束 -->
  </body>
  <script src="js/tips.js" type="text/javascript" charset="utf-8"></script>
  <script>
    $(function () {
      var nowIndexs = 0;
      var toalObj = {};
      toalObj.spe = [];
      toalObj.spe.push({});
      $("form").on("click", ".delSpec", function (e) {
        console.log(e);
        let index = e.currentTarget.dataset.index || e.target.dataset.index;
        $(this).parent().parent().remove();
        toalObj.spe.splice(index, 1);
      });
      $("form").on("click", ".addSpec", function () {
        nowIndexs = nowIndexs + 1;
        let html = `<div>
								<div style="display: flex;align-items: center;justify-content: space-between;">
									<h1 style="color: red;">规格${nowIndexs + 1}</h1>
									<div style="width: 100px;height: 40px;background: red;line-height: 40px;text-align: center;border-radius: 5px;cursor: pointer;" class="delSpec" data-index="${nowIndexs}">删除规格</div>
									<div style="width: 100px;height: 40px;background: #4390EE;line-height: 40px;text-align: center;border-radius: 5px;cursor: pointer;" class="addSpec">添加规格</div>
								</div>

								<div class="layui-form-item">
									<label class="layui-form-label">
                        <span class="x-red">*</span>商品规格
                    </label>
									<div class="layui-input-inline">
										<select class="proSpec${nowIndexs}" name="proSpec${nowIndexs}" lay-filter="proSpec${nowIndexs}">
											<option value="立方">立方</option>
											<option value="袋">袋</option>
											<option value="件">件</option>
											<option value="张">张</option>         
											<option value="根">根</option>         
											<option value="桶">桶</option>          
											<option value="卷">卷</option>          
											<option value="盒">盒</option>          
											<option value="套">套</option>            
											<option value="把">把</option>    
										</select>
									</div>
								</div>
								<div class="layui-form-item bag${nowIndexs}" style="display: none;">
									<label class="layui-form-label">
										<span class="x-red">*</span>详细规格
									</label>
									<div class="layui-input-inline">
										<input type="number" class="layui-input promsgspec" />
									</div>
									<div class="layui-form-mid layui-word-aux">
										<span class="x-red"></span>袋=1立方
									</div>
								</div>

								<div class="layui-form-item piece${nowIndexs}" style="display: none;">
									<label class="layui-form-label">
										<span class="x-red">*</span>详细规格
									</label>
									<div class="layui-input-inline">
										<input type="number" class="layui-input promsgspec" />
									</div>
									<div class="layui-form-mid layui-word-aux">
										<span class="x-red"></span>件=1立方
									</div>
								</div>

								<div class="layui-form-item zhang${nowIndexs}" style="display: none;">
									<label class="layui-form-label">
										<span class="x-red">*</span>详细规格
									</label>
									<div class="layui-input-inline">
										<input type="number" class="layui-input promsgspec" />
									</div>
									<div class="layui-form-mid layui-word-aux">
										<span class="x-red"></span>张=1立方
									</div>
								</div>
								
								<div class="layui-form-item root${nowIndexs}" style="display: none;">
									<label class="layui-form-label">
										<span class="x-red">*</span>详细规格
									</label>
									<div class="layui-input-inline">
										<input type="number" class="layui-input promsgspec" />
									</div>
									<div class="layui-form-mid layui-word-aux">
										<span class="x-red"></span>根=1立方
									</div>
								</div>
								
								<div class="layui-form-item bucket${nowIndexs}" style="display: none;">
									<label class="layui-form-label">
										<span class="x-red">*</span>详细规格
									</label>
									<div class="layui-input-inline">
										<input type="number" class="layui-input promsgspec" />
									</div>
									<div class="layui-form-mid layui-word-aux">
										<span class="x-red"></span>桶=1立方
									</div>
								</div>
								
								<div class="layui-form-item volume${nowIndexs}" style="display: none;">
									<label class="layui-form-label">
										<span class="x-red">*</span>详细规格
									</label>
									<div class="layui-input-inline">
										<input type="number" class="layui-input promsgspec" />
									</div>
									<div class="layui-form-mid layui-word-aux">
										<span class="x-red"></span>卷=1立方
									</div>
								</div>
								
								<div class="layui-form-item box${nowIndexs}" style="display: none;">
									<label class="layui-form-label">
										<span class="x-red">*</span>详细规格
									</label>
									<div class="layui-input-inline">
										<input type="number" class="layui-input promsgspec" />
									</div>
									<div class="layui-form-mid layui-word-aux">
										<span class="x-red"></span>盒=1立方
									</div>
								</div>
								
								<div class="layui-form-item set${nowIndexs}" style="display: none;">
									<label class="layui-form-label">
										<span class="x-red">*</span>详细规格
									</label>
									<div class="layui-input-inline">
										<input type="number" class="layui-input promsgspec" />
									</div>
									<div class="layui-form-mid layui-word-aux">
										<span class="x-red"></span>套=1立方
									</div>
								</div>
								
								<div class="layui-form-item hold${nowIndexs}" style="display: none;">
									<label class="layui-form-label">
										<span class="x-red">*</span>详细规格
									</label>
									<div class="layui-input-inline">
										<input type="number" class="layui-input promsgspec" />
									</div>
									<div class="layui-form-mid layui-word-aux">
										<span class="x-red"></span>把=1立方
									</div>
								</div>

								<div class="layui-form-item">
									<label class="layui-form-label">
										<span class="x-red">*</span>商品价格
									</label>

									<div class="layui-input-inline">
										<input type="number" class="layui-input proprice${nowIndexs}" />
									</div>
									<div class="layui-form-mid layui-word-aux">
										<span class="x-red"></span>元
									</div>

								</div>

								<div class="layui-form-item">
									<label class="layui-form-label">
										<span class="x-red">*</span>规格描述
									</label>

									<div class="layui-input-inline">
										<input type="text" class="layui-input describe${nowIndexs}" />
									</div>
								</div>

								<div class="layui-form-item">
									<label class="layui-form-label">
										<span class="x-red">*</span>商品库存
									</label>

									<div class="layui-input-inline">
										<input type="number" class="layui-input prostock${nowIndexs}" />
									</div>

								</div>
								
								<div class="layui-form-item">
									<label class="layui-form-label">
										<span class="x-red">*</span>排序号
									</label>

									<div class="layui-input-inline">
										<input type="number" class="layui-input proNum${nowIndexs}" />
									</div>

								</div>

								<div class="layui-form-item" style="font-size: 24px;">搬运设置</div>
								<div class="layui-form-item" style="display: flex;padding-left: 140px;">
									<div style="width: 190px;">楼梯</div>
									<div style="width: 190px;margin-left: 20px;">电梯</div>
								</div>
								<div class="layui-form-item">
									<label class="layui-form-label">
                        <span class="x-red">*</span>搬运价格/层
                    </label>
									<div class="layui-input-inline" style="display: flex;width: 400px;">
										<input type="number" placeholder="请输入楼梯搬运价格" data-type="stairs" name="layerlt" class="layui-input surepassword layer${nowIndexs} layerone">
										<input type="number" placeholder="请输入电梯搬运价格" data-type="elevator" name="layerdt" style="margin-left: 20px;" class="layui-input surepassword layer${nowIndexs} layertwo">
									</div>
									<div class="layui-form-mid layui-word-aux" style="margin-left: 10px;">
										元
									</div>
								</div>
								<div class="layui-form-item">
									<label class="layui-form-label">
                        <span class="x-red">*</span>搬运起送价
                    </label>
									<div class="layui-input-inline" style="width: 200px;display: flex;">
										<input type="number" placeholder="请输入搬运起送价" data-type="stairs" style="width: 190px;" name="secondlt" class="layui-input surepassword startmoney${nowIndexs}">
										<!--<input type="number" disabled placeholder="请输入电梯转运价格" data-type="elevator" name="seconddt" class="layui-input surepassword seconds secondstwo" style="opacity: 0;margin-left: 20px;">-->
									</div>
									<div class="layui-form-mid layui-word-aux" style="margin-left: 10px;">
										元
									</div>
								</div>
							</div>`;
        $(".spec_wrap").append(html);
        toalObj.spe.push({});
        tool(toalObj.spe[nowIndexs], nowIndexs);
      });
      if (sessionStorage.getItem("token") != "true") {
        location.href = "./index.html";
      }
      let addressType = sessionStorage.getItem("addressType");
      layui.use("upload", function () {
        //				console.log(layui)
        var upload = layui.upload;
        upload.render({
          elem: "#loadImg",
          url: "http://js.jinshapeison.com/order/uploadImg",
          //					url:'http://192.168.0.102:9002/order/uploadImg',
          multiple: true,
          before: function (obj) {
            obj.preview(function (index, file, result) {
              //		                	console.log(index,file)
              $("#demo1preview").attr("src", result); //图片链接（base64）
            });
          },
          done: function (res) {
            //						console.log(res)
            $(".choiceImg").attr("src", res.data);
          },
        });
      });

      $(".addPro").click(function () {
        console.log(toalObj, 888);
        toalObj.goodimg = $(".choiceImg").attr("src");
        toalObj.addressType = addressType;
        layui.use("layer", function () {
          let layer = layui.layer;
          if (!toalObj.gooditem) {
            layer.msg("请选择分类");
            return false;
          }
          if (!toalObj.goodname) {
            layer.msg("请填写商品名称");
            return false;
          }
          if (toalObj.goodimg == "images/chooseImage.png") {
            layer.msg("请上传商品图片");
            return false;
          }
          if (!toalObj.goodorder) {
            layer.msg("请填写商品排序号");
            return false;
          }
          for (let i = 0; i < toalObj.spe.length; i++) {
            if (!toalObj.spe[i].goodspe) {
              layer.msg("请选择规格" + (i + 1) + "商品规格");
              return false;
            }
            if (!toalObj.spe[i].price) {
              layer.msg("请填写规格" + (i + 1) + "商品价格");
              return false;
            }
            if (!toalObj.spe[i].goodcount) {
              layer.msg("请填写规格" + (i + 1) + "商品库存");
              return false;
            }
            if (
              !toalObj.spe[i].carrystairs &&
              toalObj.spe[i].carrystairs != 0
            ) {
              layer.msg("请填写规格" + (i + 1) + "商品楼梯搬运价(无请填0)");
              return false;
            }
            if (
              !toalObj.spe[i].carryelevator &&
              toalObj.spe[i].carryelevator != 0
            ) {
              layer.msg("请填写规格" + (i + 1) + "商品电梯搬运价(无请填0)");
              return false;
            }
            if (!toalObj.spe[i].startmoney && toalObj.spe[i].startmoney != 0) {
              layer.msg("请填写规格" + (i + 1) + "商品起送价(无请填0)");
              return false;
            }
            if (!toalObj.spe[i].goodorder) {
              layer.msg("请填写规格" + (i + 1) + "商品排序号");
              return false;
            }
          }
          toalObj.spe.forEach(item => {
            if(!item.gooddesribe) {
              item.gooddesribe = ' '
            }
            item.goodspe = item.gooddesribe + ' ' + item.goodspe
          })
          console.log(toalObj.spe, 6666666666666666666666666);
          toalObj.spe = JSON.stringify(toalObj.spe);
          $.ajax({
            type: "post",
            url: "http://js.jinshapeison.com/goods/addGoods",
            //						url:"http://192.168.0.108:9002/goods/addGoods",
            data: toalObj,
          }).then((res) => {
            if (res.code == 0) {
              layui.layer.msg("添加成功");
              setTimeout(function () {
                var index = parent.layer.getFrameIndex(window.name);
                parent.location.reload();
                parent.layer.close(index);
              }, 1500);
            } else {
              layui.layer.msg("添加失败，请联系管理员或重试");
            }
          });
        });
      });

      $.ajax({
        type: "get",
        url:
          "http://js.jinshapeison.com/goodsItem/findAll?addressType=" +
          addressType,
      }).then((res) => {
        var datas = res.data;
        if (datas.length > 0) {
          var str = "";
          datas.forEach((cur, index) => {
            str +=
              '<option value="' + cur.id + '">' + cur.itemname + "</option>";
          });
          $(".category").html(str);
          toalObj.gooditem = datas[0].id;
        }
        layui.use("form", function () {
          var form = layui.form;
          form.render("select");
          form.on("select(category)", function (data) {
            toalObj.gooditem = data.value;
          });
        });
      });
      toalObj.goodimg =
        "https://dss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=2210930787,594353927&fm=26&gp=0.jpg";
      $(".proname").on("input", function (e) {
        toalObj.goodname = e.target.value;
      });
      $(".choiceImg").click(function () {
        $(this).siblings("input").click();
      });
      $(".proNum").on("input", function (e) {
        toalObj.goodorder = Number(e.target.value);
      });
      toalObj.isonline = 1;
      layui.use("form", function () {
        layui.form.on("select(online)", function (data) {
          toalObj.isonline = Number(data.value);
        });
      });
      tool(toalObj.spe[0], 0);
      var gooddesribe = ''
      function tool(obj, index) {
        var goodSpecL = "立方";
        obj.goodspe = "立方";
        layui.use("form", function () {
          layui.form.render("select");
        });

        $(".layer" + index).on("input", function (e) {
          if (e.currentTarget.dataset.type == "stairs") {
            obj.carrystairs = e.target.value;
          } else {
            obj.carryelevator = e.target.value;
          }
        });
        $(".rice" + index).on("input", function (e) {
          if (e.currentTarget.dataset.type == "stairs") {
            obj.unloadstatirs = e.target.value;
          } else {
            obj.unloadelevator = e.target.value;
          }
        });
        $(".seconds" + index).on("input", function (e) {
          obj.turns = e.target.value;
        });
        $(".proNum" + index).on("input", function (e) {
          obj.goodorder = Number(e.target.value);
        });
        $(".startmoney" + index).on("input", function (e) {
          obj.startmoney = e.target.value;
        });

        $(".proprice" + index).on("input", function (e) {
          obj.price = Number(e.target.value);
        });
        $(".prostock" + index).on("input", function (e) {
          obj.goodcount = Number(e.target.value);
        });
        $(".describe" + index).on("input", function (e) {
          // obj.goodspe = e.target.value + ' ' + "立方";
          obj.gooddesribe = e.target.value;
        });
        $(".proNum" + index).on("input", function (e) {
          obj.goodorder = Number(e.target.value);
        });

        $("form")
          .off("input", ".bag" + index + " input")
          .on("input", ".bag" + index, function (e) {
            obj.goodspe = e.target.value + goodSpecL + "/立方";
          });
        $("form")
          .off("input", ".piece" + index + " input")
          .on("input", ".piece" + index, function (e) {
            obj.goodspe = e.target.value + goodSpecL + "/立方";
          });
        $("form")
          .off("input", ".zhang" + index + " input")
          .on("input", ".zhang" + index, function (e) {
            obj.goodspe = e.target.value + goodSpecL + "/立方";
          });
        $("form")
          .off("input", ".root" + index + " input")
          .on("input", ".root" + index, function (e) {
            obj.goodspe = e.target.value + goodSpecL + "/立方";
          });
        $("form")
          .off("input", ".bucket" + index + " input")
          .on("input", ".bucket" + index, function (e) {
            obj.goodspe = e.target.value + goodSpecL + "/立方";
          });
        $("form")
          .off("input", ".volume" + index + " input")
          .on("input", ".volume" + index, function (e) {
            obj.goodspe = e.target.value + goodSpecL + "/立方";
          });
        $("form")
          .off("input", ".box" + index + " input")
          .on("input", ".box" + index, function (e) {
            obj.goodspe = e.target.value + goodSpecL + "/立方";
          });
        $("form")
          .off("input", ".set" + index + " input")
          .on("input", ".set" + index, function (e) {
            obj.goodspe = e.target.value + goodSpecL + "/立方";
          });
        $("form")
          .off("input", ".hold" + index + " input")
          .on("input", ".hold" + index, function (e) {
            obj.goodspe = e.target.value + goodSpecL + "/立方";
          });

        layui.use("form", function () {
          var form = layui.form;

          form.on("select(proSpec" + index + ")", function (data) {
            if (data.value == "袋") {
              $(".bag" + index).show();
              $(".piece" + index).hide();
              $(".zhang" + index).hide();
              $(".root" + index).hide();
              $(".bucket" + index).hide();
              $(".volume" + index).hide();
              $(".box" + index).hide();
              $(".set" + index).hide();
              $(".hold" + index).hide();
              goodSpecL = data.value;
            } else if (data.value == "件") {
              $(".bag" + index).hide();
              $(".piece" + index).show();
              $(".zhang" + index).hide();
              $(".root" + index).hide();
              $(".bucket" + index).hide();
              $(".volume" + index).hide();
              $(".box" + index).hide();
              $(".set" + index).hide();
              $(".hold" + index).hide();
              goodSpecL = data.value;
            } else if (data.value == "张") {
              $(".bag" + index).hide();
              $(".piece" + index).hide();
              $(".zhang" + index).show();
              $(".root" + index).hide();
              $(".bucket" + index).hide();
              $(".volume" + index).hide();
              $(".box" + index).hide();
              $(".set" + index).hide();
              $(".hold" + index).hide();
              goodSpecL = data.value;
            } else if (data.value == "根") {
              $(".bag" + index).hide();
              $(".piece" + index).hide();
              $(".zhang" + index).hide();
              $(".root" + index).show();
              $(".bucket" + index).hide();
              $(".volume" + index).hide();
              $(".box" + index).hide();
              $(".set" + index).hide();
              $(".hold" + index).hide();
              goodSpecL = data.value;
            } else if (data.value == "桶") {
              $(".bag" + index).hide();
              $(".piece" + index).hide();
              $(".zhang" + index).hide();
              $(".root" + index).hide();
              $(".bucket" + index).show();
              $(".volume" + index).hide();
              $(".box" + index).hide();
              $(".set" + index).hide();
              $(".hold" + index).hide();
              goodSpecL = data.value;
            } else if (data.value == "卷") {
              $(".bag" + index).hide();
              $(".piece" + index).hide();
              $(".zhang" + index).hide();
              $(".root" + index).hide();
              $(".bucket" + index).hide();
              $(".volume" + index).show();
              $(".box" + index).hide();
              $(".set" + index).hide();
              $(".hold" + index).hide();
              goodSpecL = data.value;
            } else if (data.value == "盒") {
              $(".bag" + index).hide();
              $(".piece" + index).hide();
              $(".zhang" + index).hide();
              $(".root" + index).hide();
              $(".bucket" + index).hide();
              $(".volume" + index).hide();
              $(".box" + index).show();
              $(".set" + index).hide();
              $(".hold" + index).hide();
              goodSpecL = data.value;
            } else if (data.value == "套") {
              $(".bag" + index).hide();
              $(".piece" + index).hide();
              $(".zhang" + index).hide();
              $(".root" + index).hide();
              $(".bucket" + index).hide();
              $(".volume" + index).hide();
              $(".box" + index).hide();
              $(".set" + index).show();
              $(".hold" + index).hide();
              goodSpecL = data.value;
            } else if (data.value == "把") {
              $(".bag" + index).hide();
              $(".piece" + index).hide();
              $(".zhang" + index).hide();
              $(".root" + index).hide();
              $(".bucket" + index).hide();
              $(".volume" + index).hide();
              $(".box" + index).hide();
              $(".set" + index).hide();
              $(".hold" + index).show();
              goodSpecL = data.value;
            } else {
              $(".bag" + index).hide();
              $(".piece" + index).hide();
              $(".zhang" + index).hide();
              $(".root" + index).hide();
              $(".bucket" + index).hide();
              $(".volume" + index).hide();
              $(".box" + index).hide();
              $(".set" + index).hide();
              $(".hold" + index).hide();
              obj.goodspe = data.value;
            }
          });
        });
      }
    });
  </script>
</html>
